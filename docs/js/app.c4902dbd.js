(function(t){function e(e){for(var a,r,i=e[0],l=e[1],c=e[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var l=n[i];0!==s[l]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},s={app:0},o=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/roistat/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0cbe":function(t,e,n){},"0dd1":function(t,e,n){"use strict";n("0cbe")},"4e41":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("AddedUsers",{staticClass:"app__added-users",on:{showForm:t.showForm}}),n("transition",{attrs:{name:"fade"}},[n("Form",{directives:[{name:"show",rawName:"v-show",value:t.visibleForm,expression:"visibleForm"}],staticClass:"app__add-form",on:{hideForm:function(e){return t.hideForm()}}})],1)],1)},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"added-users"},[n("Button",{staticClass:"added-users__btn",attrs:{btnMsg:t.btnMsg},on:{showForm:t.showForm}}),n("Table",{staticClass:"added-users__table"})],1)},i=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn",on:{click:function(e){t.showForm(),t.saveData()}}},[t._v(" "+t._s(t.btnMsg)+" ")])},c=[],u={name:"Button",props:{btnMsg:String},methods:{showForm:function(){this.$emit("showForm")},saveData:function(){this.$emit("saveData")}}},d=u,m=(n("ef55"),n("2877")),f=Object(m["a"])(d,l,c,!1,null,null,null),p=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[n("tr",{staticClass:"table__row"},[n("td",{staticClass:"table__td",on:{click:t.sortName}},[t._v(" Имя "),n("div",{staticClass:"arrow",class:{rotateArrow:t.nameArrow}},[t._v(" ↥ ")])]),n("td",{staticClass:"table__td",on:{click:t.sortPhone}},[t._v(" Телефон "),n("div",{staticClass:"arrow",class:{rotateArrow:t.phoneArrow}},[t._v(" ↥ ")])])]),t._l(t.users,(function(e,a){return n("tr",{key:a,staticClass:"table__row"},[n("td",{staticClass:"table__td table__td_parent",class:{"cursor-pointer":e.subordinates.length>0},on:{click:t.hideShowSubordinates}},[t._v(" "+t._s(e.name)+" "),e.subordinates.length>0?n("span",{staticClass:"table__number-of-subordinates"},[t._v(" "+t._s(e.subordinates.length)+" ")]):t._e()]),n("td",{staticClass:"table__td table__td_parent"},[t._v(t._s(e.phone))]),n("td",{staticClass:"table__td_subordinate"},[n("table",{staticClass:"table"},t._l(e.subordinates,(function(e,a){return n("tr",{key:a,staticClass:"table__row-subordinate"},[n("td",{staticClass:"table__td"},[t._v(t._s(e.name))]),n("td",{staticClass:"table__td"},[t._v(t._s(e.phone))])])})),0)])])}))],2)},b=[],_=(n("4160"),n("159b"),{data:function(){return{nameArrow:null,phoneArrow:null}},computed:{users:function(){return this.$store.getters.users}},methods:{sortName:function(){this.$store.commit("sortName"),this.nameArrow=!this.nameArrow},sortPhone:function(){this.$store.commit("sortPhone"),this.phoneArrow=!this.phoneArrow},hideShowSubordinates:function(t){var e=t.target.parentElement,n=e.children;n.forEach((function(t){t.matches(".table__td_subordinate")&&("none"==t.style.display?t.style.display="block":t.style.display="none")}))}}}),v=_,g=(n("d143"),Object(m["a"])(v,h,b,!1,null,null,null)),w=g.exports,C={name:"AddedUsers",components:{Button:p,Table:w},data:function(){return{btnMsg:"Добавить"}},methods:{showForm:function(){this.$emit("showForm")}}},y=C,F=(n("0dd1"),Object(m["a"])(y,r,i,!1,null,null,null)),D=F.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"app__add-form add-form",attrs:{action:"#"},on:{submit:function(t){t.preventDefault()}}},[n("span",{staticClass:"add-form__close",on:{click:t.hideForm}},[t._v(" ✖ ")]),n("p",{staticClass:"add-form__title"},[t._v("Добавление пользователя")]),n("div",{staticClass:"add-form__row"},[n("label",{staticClass:"add-form__label",attrs:{for:"name"}},[t._v("Имя")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"add-form__input",attrs:{type:"text",name:"name",id:"name"},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value.trim())},t.firstCapitalLetter],blur:function(e){return t.$forceUpdate()}}})]),n("div",{staticClass:"add-form__row"},[n("label",{staticClass:"add-form__label",attrs:{for:"phone"}},[t._v("Телефон")]),n("input-mask",{staticClass:"add-form__input",attrs:{mask:"+7\\ 999 999 99 99",maskChar:" ",id:"phone",name:"phone"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),n("div",{staticClass:"add-form__row"},[n("label",{staticClass:"add-form__label",attrs:{for:"chief"}},[t._v("Начальник")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.select,expression:"select"}],staticClass:"add-form__select",attrs:{name:"chief",id:"chief"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.select=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}}),t._l(t.bosses,(function(e,a){return n("option",{key:a,domProps:{value:e.name}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),n("Button",{staticClass:"add-form__btn",attrs:{btnMsg:t.btnMsg},on:{saveData:t.saveData}})],1)},O=[],$=(n("a15b"),n("d81d"),n("fb6a"),n("b0c0"),n("ac1f"),n("5319"),n("1276"),{name:"Form",components:{Button:p},data:function(){return{btnMsg:"Сохранить",name:"",phone:"",select:""}},computed:{bosses:function(){return this.$store.getters.users}},methods:{hideForm:function(){this.$emit("hideForm")},saveData:function(){this.name.length>0&&this.phone.length>0&&(this.select?(this.$store.commit("addingASubordinate",{name:this.name,phone:this.phone,boss:this.select}),this.name="",this.phone=""):(this.$store.commit("addingUser",{name:this.name,phone:this.phone}),this.name="",this.phone=""))},firstCapitalLetter:function(){this.name&&(this.name=this.name.replace(/\s+/g," ").split(" ").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join(" "))}}}),k=$,A=(n("c4e7"),Object(m["a"])(k,S,O,!1,null,null,null)),x=A.exports,j={name:"App",components:{AddedUsers:D,Form:x},data:function(){return{visibleForm:!1}},methods:{showForm:function(){this.visibleForm=!0},hideForm:function(){this.visibleForm=!1}},created:function(){JSON.parse(localStorage.getItem("data"))&&this.$store.commit("loadingFromLocStor")}},P=j,M=(n("5c0b"),Object(m["a"])(P,s,o,!1,null,null,null)),N=M.exports,E=n("2f62");a["a"].use(E["a"]);var L=new E["a"].Store({state:{tableData:[{name:"Марина",phone:"+7 941 123 21 42",subordinates:[]},{name:"Петр",phone:"+7 941 123 21 42",subordinates:[]},{name:"Алексей",phone:"+7 941 123 21 42",subordinates:[]},{name:"Борис",phone:"+7 941 123 21 42",subordinates:[]}],sortingDirection:!0},getters:{users:function(t){return t.tableData}},mutations:{loadingFromLocStor:function(t){t.tableData=JSON.parse(localStorage.getItem("data"))},sortName:function(t){t.sortingDirection=!t.sortingDirection,t.sortingDirection?t.tableData.sort((function(t,e){var n=t.name.toLowerCase(),a=e.name.toLowerCase();return n<a?-1:n>a?1:0})):t.tableData.sort((function(t,e){var n=t.name.toLowerCase(),a=e.name.toLowerCase();return n<a?1:n>a?-1:0}))},sortPhone:function(t){function e(t){return t.replace(/\s+/g,"")}t.sortingDirection=!t.sortingDirection,t.sortingDirection?t.tableData.sort((function(t,n){return e(t.phone)-e(n.phone)})):t.tableData.sort((function(t,n){return e(n.phone)-e(t.phone)}))},addingUser:function(t,e){t.tableData.push({name:e.name,phone:e.phone,subordinates:[]}),localStorage.setItem("data",JSON.stringify(t.tableData))},addingASubordinate:function(t,e){t.tableData.forEach((function(n){n.name==e.boss&&(n.subordinates.push({name:e.name,phone:e.phone}),localStorage.setItem("data",JSON.stringify(t.tableData)))}))}}}),U=n("f65f"),J=n.n(U);a["a"].component("input-mask",J.a),a["a"].config.productionTip=!1,new a["a"]({store:L,render:function(t){return t(N)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"86b4":function(t,e,n){},"9c0c":function(t,e,n){},c4e7:function(t,e,n){"use strict";n("86b4")},d143:function(t,e,n){"use strict";n("4e41")},da8d:function(t,e,n){},ef55:function(t,e,n){"use strict";n("da8d")}});
//# sourceMappingURL=app.c4902dbd.js.map